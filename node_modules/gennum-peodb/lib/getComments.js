//============================================================================//

var print = console.log;

//============================================================================//

module.exports = function(PEODB) {

  PEODB.prototype.getComments = function(args, cb) {
    var peodb = this;

    if (!(args instanceof Object)) {
      args = { blob_id: args };
    }

    getComments(peodb.sharedDB, args, cb);
  }

  function getComments(db, args, cb) {
    var qStr =
      'SELECT comment_id, comment_key, user_id, create_time, data'
    + ' FROM comments'
    ;
    qStr += ' WHERE 1 = 1'
    if (args.comment_id) {
      qStr += ' AND comment_id = ' + db.escape(args.comment_id);
    }
    if (args.comment_key) {
      qStr += ' AND comment_key = ' + db.escape(args.comment_key);
    }
    if (args.user_id) {
      qStr += ' AND user_id = ' + db.escape(args.user_id);
    }
    qStr += ' ORDER BY create_time';
    db.queryData(qStr, function(err, data) {
      return cb(err, data);
    });
  }
}

//============================================================================//
