//============================================================================//

var print = console.log;

//============================================================================//

var queryBasis =
  'SELECT'
  + '     company_id'
  + '   , parent_company_id'
  + '   , name'
  + ' FROM'
  + '   companies'
  ;

module.exports = function(PEODB) {

  PEODB.prototype.getCompanies = function(args, cb) {
    var peodb = this;

    if (typeof(args) === 'function') {
      cb = args;
      args = {};
    }

    getCompanies(peodb.sharedDB, args, cb);
  }

  function getCompanies(db, args, cb) {
    var qStr = queryBasis;
    if (args.filter) {
      qStr += ' WHERE name LIKE ' + db.escape(args.filter);
    }
    db.queryData(qStr, function(err, data) {
      return cb(err, data);
    });
  }
}

//============================================================================//
