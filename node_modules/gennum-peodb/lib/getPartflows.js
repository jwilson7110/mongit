//============================================================================//

var print = console.log;

//============================================================================//

module.exports = function(PEODB) {

  PEODB.prototype.getPartflows = function(args, cb) {
    var peodb = this;

    if (typeof(args) === 'function') {
      cb = args;
      args = {};
    }

    getPartflows(peodb.sharedDB, args, cb);
  }

  function getPartflows(db, args, cb) {
    var qStr = 'SELECT partflow_id, root_part_id, name, description'
               + ' FROM partflows';
    if (args.part_id) {
      qStr += ' WHERE root_part_id = ' + db.escape(args.part_id);
    }
    else if (args.partflow_id) {
      qStr += ' WHERE partflow_id = ' + db.escape(args.partflow_id);
    }
    db.queryData(qStr, function(err, data) {
      return cb(err, data);
    });
  }
}

//============================================================================//
