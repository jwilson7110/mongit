//============================================================================//

var print = console.log;

//============================================================================//

var queryBasis =
  'SELECT'
  + '     user_id'
  + '   , ldap_id'
  + '   , name'
  + '   , phone'
  + '   , mobile'
  + '   , email'
  + '   , fax'
  + '   , title'
  + '   , state'
  + ' FROM'
  + '   users'
  + ' WHERE 1 = 1'
  ;

module.exports = function(PEODB) {

  PEODB.prototype.getUsers = function(args, cb) {
    var peodb = this;

    if (typeof(args) === 'function') {
      cb = args;
      args = {};
    }

    getUsers(peodb.sharedDB, args, cb);
  }

  function getUsers(db, args, cb) {
    var qStr = queryBasis;
    if (args.user_id) {
      qStr += ' AND user_id = ' + db.escape(args.user_id);
    }
    if (args.name) {
      qStr += ' AND name = '    + db.escape(args.name);
    }
    if (args.name_like) {
      qStr += ' AND name LIKE ' + db.escape(args.name_like);
    }
    db.queryData(qStr, function(err, data) {
      return cb(err, data);
    });
  }
}

//============================================================================//
