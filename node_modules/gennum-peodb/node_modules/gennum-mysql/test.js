#!/usr/bin/env node

var print = console.log;

var mysql = require('gennum-mysql');

var client = mysql.createClient(require('../../peodb.conf.js'));


var qStr = 'select * from users';
client.oldQuery(qStr, function(err, results, fields) {
  print('oldstyle err', err);
  if (!err) {
    print('oldstyle results', results);
    print('oldstyle fields', fields);
  }
  print('oldstyle JSON', JSON.stringify(results));
  print('  fields[0]', fields[0]);
  client.queryData(qStr, function(err, data) {
    print(qStr, err, data);
    if (!err) {
      print('fieldMap', data.fieldMap);
      print('data.toString()', data.toString());
      print('JSON.stringify(data)', JSON.stringify(data));
    }
    var qStr = 'shit-select * from users';
    client.queryData(qStr, function(err, data) {
      print(qStr, err, JSON.stringify(data));
      if (!err) {
        print('data.rows[0]',           data.rows[0])
        print('data.rows[0].length',    data.rows[0].length)
        print('data.rows[0].name',      data.rows[0].name)
        print('data.rows[0].__proto__', data.rows[0].__proto__)
        print('fieldMap', data.fieldMap);
      }
      client.end();
      print(client.constructor.name);
      print(mysql.isMySQLClient(client));
      print(mysql.isMySQLClient(mysql));
      print(mysql.isMySQLClient(null));
      print(mysql.isMySQLClient('test'));
    });
  });
});
