################################################################################
#
#  Audits
#

CREATE TABLE `ate_types` ( -- LIST-TABLE
  `ate_type_id`         INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY
, `company_id`          INT UNSIGNED NOT NULL -- ate_vendors
, `brief`               VARCHAR(32)  NOT NULL
, `description`         TEXT         NOT NULL
, `abbr`                VARCHAR(4)
, `svn_root`            VARCHAR(16)
, UNIQUE KEY (`brief`)
, UNIQUE KEY (`abbr`)
, FOREIGN KEY (`company_id`) REFERENCES `ate_vendors` (`company_id`)
);

CREATE TABLE `ate_units` (
  `ate_unit_id`         INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY
, `ate_type_id`         INT UNSIGNED NOT NULL
, `company_id`          INT UNSIGNED NOT NULL -- test_houses
, `name`                VARCHAR(255) NOT NULL
, `comments`            TEXT
, UNIQUE KEY (`name`)
, FOREIGN KEY (`ate_type_id`) REFERENCES `ate_types`   (`ate_type_id`)
, FOREIGN KEY (`company_id`)  REFERENCES `test_houses` (`company_id`)
);

INSERT INTO dbdoc(`table_name`, `field_name`, `description`) VALUES
  ("ate_units", NULL,          "ATE units (specific testers)")
, ("ate_units", "ate_unit_id", "primary key")
, ("ate_units", "ate_type_id", "foreign key into ate_types")
, ("ate_units", "company_id",  "company that owns the unit")
, ("ate_units", "name",        "the unit's name")
, ("ate_units", "comments",    "comments relating to the unit")
;

################################################################################

CREATE TABLE `ate_os_versions` ( -- LIST-TABLE
  `ate_os_version_id`   INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY
, `ate_type_id`         INT UNSIGNED NOT NULL
, `version`             VARCHAR(64)
, UNIQUE  KEY (`ate_type_id`, `version`)
, FOREIGN KEY (`ate_type_id`) REFERENCES `ate_types` (`ate_type_id`)
);

CREATE TABLE `ate_sw_versions` ( -- LIST-TABLE
  `ate_sw_version_id`   INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY
, `ate_type_id`         INT UNSIGNED NOT NULL
, `version`             VARCHAR(64)
, UNIQUE  KEY (`ate_type_id`, `version`)
, FOREIGN KEY (`ate_type_id`) REFERENCES `ate_types` (`ate_type_id`)
);

################################################################################
