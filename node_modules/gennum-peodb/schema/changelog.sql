################################################################################
#
#  Changelog for all user actions that modify the database
#

# FIXME - use it? are the WEBSOCKET logs sufficient?
# FIXME - make it more like in action log, using JSON from the call args?

CREATE TABLE `changelog` (
  `change_id`           INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY
, `user_id`             INT SIGNED   NOT NULL
, `change_time`         DOUBLE       NOT NULL -- TIME_T
, `change_type`         ENUM('INSERT', 'DELETE', 'UPDATE') NOT NULL
, `table_name`          VARCHAR(255)
, `field_name`          VARCHAR(255)
, `row_id`              INT UNSIGNED
, `old_text`            TEXT
, `old_uint`            INT UNSIGNED
, FOREIGN KEY (`user_id`) REFERENCES `users` (`user_id`)
);

################################################################################
