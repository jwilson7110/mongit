################################################################################

CREATE TABLE `test_flags` (
  `test_flag_id`        INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY
, `tp_rev_id`           INT UNSIGNED NOT NULL
, `flag_name`           VARCHAR(255) NOT NULL
, `flag_value`          VARCHAR(255) NOT NULL
, `state`               ENUM("PASS","FAIL","WARN","IGNORE","UNKNOWN") NOT NULL
, UNIQUE  KEY (`tp_rev_id`, `flag_name`)
, FOREIGN KEY (`tp_rev_id`) REFERENCES `tp_revs` (`tp_rev_id`)
);

INSERT INTO dbdoc(`table_name`, `field_name`, `description`) VALUES
  ("test_flags", NULL,           "test flags")
, ("test_flags", "test_flag_id", "primary key")
, ("test_flags", "tp_rev_id",    "foreign key to the associate tp_rev")
, ("test_flags", "flag_name",    "the test flag's name")
, ("test_flags", "flag_value",   "the test flag's value")
, ("test_flags", "state",        "the test flag's state")
;

################################################################################

CREATE TABLE `test_flag_defs` ( -- FIXME -- unused
  `ate_type_id`         INT UNSIGNED NOT NULL
, `flag_name`           VARCHAR(255) NOT NULL
, `flag_value`          VARCHAR(255) NOT NULL
, `policy`              ENUM("FAIL","WARN","IGNORE") NOT NULL
, PRIMARY KEY (`ate_type_id`, `flag_name`)
, FOREIGN KEY (`ate_type_id`) REFERENCES `ate_types` (`ate_type_id`)
);

INSERT INTO dbdoc(`table_name`, `field_name`, `description`) VALUES
  ("test_flag_defs", NULL,          "test flag definitions")
, ("test_flag_defs", "ate_type_id", "foreign key to the associate tp_rev")
, ("test_flag_defs", "flag_name",   "the test flag's name")
, ("test_flag_defs", "flag_value",  "the test flag's expected value")
, ("test_flag_defs", "policy",      "flag handling policy")
;

################################################################################
