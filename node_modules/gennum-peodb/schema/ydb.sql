################################################################################
#
#  Generic data storage for YDB (with object associations)
#

CREATE TABLE `ydb_data` (
  `object_id`           INT UNSIGNED NOT NULL
, `name`                VARCHAR(255) NOT NULL
, `int_value`           INT
, `blob_value`          LONGBLOB
, `text_value`          TEXT
, `double_value`        DOUBLE
, PRIMARY KEY (`object_id`, `name`)
, FOREIGN KEY (`object_id`) REFERENCES `objects` (`object_id`)
);

################################################################################
#
#  A mapping for the Datalog Database part numbers
#
#  NOTE: these tables are owned by the YDB tool, and do not
#        require access methods from the gennum-peodb module
#

CREATE TABLE `dldb_part_map` (
  `part_id`             INT UNSIGNED NOT NULL
, `dldb_product_name`   VARCHAR(255) NOT NULL
, `dldb_test_type`      VARCHAR(2)   NOT NULL
, PRIMARY KEY (`part_id`, `dldb_product_name`, `dldb_test_type`)
, FOREIGN KEY (`part_id`) REFERENCES `parts` (`part_id`)
);

CREATE TABLE `dldb_criteria` (
  `dldb_product_name`   VARCHAR(255) NOT NULL
, `dldb_test_type`      VARCHAR(2)   NOT NULL
, `int_value`           INT
, `text_value`          TEXT
, `double_value`        DOUBLE
, PRIMARY KEY (`dldb_product_name`, `dldb_test_type`)
);

################################################################################
